{% extends "base.html" %}
{% load static %}
{% block content %}
<link rel="stylesheet" href="{% static 'css/track_order.css' %}">

<div class="page-banner">
  {% if banner %}<img src="{{ banner.image.url }}" alt="Banner">{% endif %}
</div>

<div class="track-wrap">
  <h2>Track Order — {{ order.order_number }}</h2>
  <p>Placed on: {{ order.created_at|date:"d M Y" }}</p>

  <div class="timeline">
    {% for step in timeline %}
      {% if step.time %}
        <div class="step completed">
          <div class="circle">✔</div>
          <div class="info">
            <div class="label">{{ step.label }}</div>
            <div class="time">{{ step.time|date:"d M Y" }}</div>
          </div>
        </div>
      {% else %}
        <div class="step">
          <div class="circle">●</div>
          <div class="info">
            <div class="label">{{ step.label }}</div>
            <div class="time">Pending</div>
          </div>
        </div>
      {% endif %}
    {% endfor %}
  </div>

  <div class="order-summary-box">
    <h3>Your Order</h3>
    {% for it in order.items.all %}
      <div class="row">
        <div class="left">{{ it.product_name }} x {{ it.quantity }}</div>
        <div class="right">Rs. {{ it.total_price|floatformat:"-2" }}</div>
      </div>
    {% endfor %}
    <hr>
    <div class="row total">
      <div>Total</div><div>Rs. {{ order.total|floatformat:"-2" }}</div>
    </div>
  </div>
</div>
{% endblock %}
